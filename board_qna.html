<!DOCTYPE html>

<html lang="ko">
<head>
<link href="styles/theme-colors.css" rel="stylesheet"/><link href="styles/layout.css" rel="stylesheet"/><link href="styles/board_qna.css" rel="stylesheet"/>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>TaxSonic | Q&amp;A</title>



</head>
<body>
<!-- Slide Menu -->
<button aria-label="메뉴 열기" id="hamburgerBtn" type="button">☰</button>
<div aria-hidden="true" id="drawerBackdrop"></div>
<aside aria-label="슬라이드 메뉴" id="drawer">
<div class="drawerHead">
<div class="drawerTitle">메뉴</div>
<button class="drawerClose" id="drawerClose" type="button">닫기</button>
</div>
<div class="drawerNav">
<div class="drawerGroup">
<div class="drawerGroupTitle">기본</div>
<a href="service_main.html">메인</a>
<a href="onboarding.html">이용 가이드</a>
<a href="login.html">로그인</a>
</div>
<div class="drawerGroup">
<div class="drawerGroupTitle">계산</div>
<a href="quick_calc.html">간편 계산</a>
<a href="detail_income.html">상세 계산</a>
</div>
<div class="drawerGroup">
<div class="drawerGroupTitle">고객센터</div>
<a href="board_qna.html">Q&amp;A</a>
<a href="board_faq.html">FAQ</a>
</div>
<div class="drawerGroup" data-user-only="true">
<div class="drawerGroupTitle">내 정보</div>
<a href="mypage.html">마이페이지</a>
<a href="member_history.html">기록 열람</a>
</div>
<div class="drawerGroup" data-admin-only="true">
<div class="drawerGroupTitle">관리자</div>
<a href="admin_tax_rates.html">세율/정책</a>
<a href="admin_deduction_items.html">공제 항목</a>
<a href="admin_analytics.html">로그 분석</a>
</div>
</div>
</aside>
<header>
<div class="container header-inner">
<div class="logo"><a href="service_main.html">TaxSonic</a></div>
<nav>
<a class="" href="onboarding.html">이용 가이드</a>
<a class="" href="quick_calc.html">간편 계산</a>
<a class="" href="detail_income.html">상세 계산</a>
<a class="active" href="board_qna.html">Q&amp;A</a>
<a class="" href="board_faq.html">FAQ</a>
<a class="" href="login.html">로그인</a>
</nav>
</div>
</header>
<main class="container">
<div class="h1">Q&amp;A</div>
<p class="p">사용 중 모르는 내용을 질문하면 관리자가 댓글로 답변해드립니다.</p>
<div class="grid">
<div class="surface">
<div class="qna-head">
<div class="h3" style="margin: 0;">질문 목록</div>
<a class="btn-primary btn-small" href="board_qna_write.html">질문하기</a>
</div>
<div class="list" style="margin-top: 12px;">
<div class="list-item">
<div>
<div style="font-weight:700;">월세 세액공제 조건이 헷갈려요</div>
<div class="meta">작성자: guest · 2026-01-05 · <span class="badge green">해결됨</span></div>
</div>
<button class="btn-ghost btn-small" onclick="openThread(1)">보기</button>
</div>
<div class="list-item">
<div>
<div class="meta">작성자: member@example.com · 2026-01-04 · <span class="badge">진행중</span></div>
</div>
<button class="btn-ghost btn-small" onclick="openThread(2)">보기</button>
</div>
</div>
</div>
</div>
</main>
<div id="thread" style="display:none; position:fixed; inset:0; background: rgba(0,0,0,0.35); align-items:center; justify-content:center; z-index: 1000;">
<div class="surface" style="max-width:760px; width: 94%; max-height: 86vh; overflow:auto;">
<div style="display:flex; justify-content:space-between; align-items:flex-start; gap:12px;">
<div>
<div class="h3" id="tTitle">질문</div>
<div class="muted" id="tMeta">작성 정보</div>
</div>
<button class="btn-ghost btn-small" onclick="closeThread()">닫기</button>
</div>
<div class="hr"></div>
<div class="p" id="tBody" style="white-space:pre-line;"></div>
<div class="hr"></div>
<div class="h3">댓글(답변)</div>
<div class="list" style="margin-top: 10px;">
<div class="list-item">
<div>
<div style="font-weight:700;">관리자</div>
<div class="meta">2026-01-05 12:10</div>
<div class="p" style="margin: 8px 0 0;">월세 세액공제는 연도별 공제율/한도와 조건이 있습니다. 계약서/이체내역을 준비해 주세요.</div>
</div>
<span class="badge green">답변</span>
</div>
</div>
<div class="hr"></div>
<div class="notice">
<b>관리자 전용</b>: 실제 서비스에서는 관리자 계정만 댓글 작성/해결 처리 가능합니다.
    </div>
<div style="display:flex; gap:10px; justify-content:flex-end; margin-top: 12px;">
<button class="btn-ghost" onclick="alert('해결 처리(데모)')">해결됨 처리</button>
<button class="btn-primary" onclick="alert('댓글 작성(데모)')">댓글 작성</button>
</div>
</div>
</div>
<script>
function openThread(id){
  const title = document.getElementById('tTitle');
  const meta = document.getElementById('tMeta');
  const body = document.getElementById('tBody');
  if(id===1){
    title.innerText = "월세 세액공제 조건이 헷갈려요";
    meta.innerText = "작성자: guest · 2026-01-05 · 상태: 해결됨";
    body.innerText = "월세 공제를 받으려면 어떤 조건을 만족해야 하나요?\n필요한 서류도 알려주세요.";
  }else{
    meta.innerText = "작성자: member@example.com · 2026-01-04 · 상태: 진행중";
    body.innerText = "카드사에서 받은 엑셀을 올리면 오류가 뜹니다.\n컬럼 형식이 다른 걸까요?";
  }
  document.getElementById('thread').style.display='flex';
}
function closeThread(){ document.getElementById('thread').style.display='none'; }
</script>
<footer class="footer">© 2026 TaxSonic. All rights reserved.</footer>
<script>
(function(){
  const btn = document.getElementById('hamburgerBtn');
  const drawer = document.getElementById('drawer');
  const backdrop = document.getElementById('drawerBackdrop');
  const closeBtn = document.getElementById('drawerClose');

  function open(){
    drawer && drawer.classList.add('open');
    backdrop && backdrop.classList.add('open');
  }
  function close(){
    drawer && drawer.classList.remove('open');
    backdrop && backdrop.classList.remove('open');
  }
  btn && btn.addEventListener('click', open);
  closeBtn && closeBtn.addEventListener('click', close);
  backdrop && backdrop.addEventListener('click', close);
  // ===== Active highlight (drawer + header nav) =====
  const current = (location.pathname.split('/').pop() || 'index.html').split('?')[0].split('#')[0];
  const allLinks = document.querySelectorAll('#drawer .drawerNav a');
  allLinks.forEach(a => {
    const href = (a.getAttribute('href') || '').trim();
    if(href && href === current){ a.classList.add('active'); }
  });
  const topNavLinks = document.querySelectorAll('header nav a');
  topNavLinks.forEach(a => {
    const href = (a.getAttribute('href') || '').trim();
    if(href && href === current){ a.classList.add('active'); }
  });

    // ===== Admin visibility (role-based, no toggle) =====
  function getUserRole(){
    const role = localStorage.getItem('taxsonic_user_role')
      || localStorage.getItem('taxsonic_role')
      || localStorage.getItem('role')
      || '';
    return String(role).toLowerCase();
  }
  function isLoggedIn(){
    const v = localStorage.getItem('taxsonic_is_logged_in')
      || localStorage.getItem('taxsonic_logged_in')
      || localStorage.getItem('is_logged_in')
      || '';
    const hasToken = !!(localStorage.getItem('taxsonic_token') || localStorage.getItem('auth_token') || localStorage.getItem('access_token'));
    const hasUser = !!(localStorage.getItem('taxsonic_user_id') || localStorage.getItem('user_id') || localStorage.getItem('username'));
    // If role is set, treat as logged-in for this static prototype.
    const role = getUserRole();
    return v === '1' || v === 'true' || hasToken || hasUser || role === 'admin' || role === 'user';
  }
  function getIsAdmin(){
    const role = getUserRole();
    const legacy = (localStorage.getItem('taxsonic_is_admin') === '1'); // backward compat for older builds
    return role === 'admin' || legacy;
  }
  function applyAdminVisibility(){
    const showAdmin = isLoggedIn() && getIsAdmin();
    document.querySelectorAll('[data-admin-only="true"]').forEach(el => {
      el.style.display = showAdmin ? '' : 'none';
    });
  }
  applyAdminVisibility();

// ===== Accordion groups =====
  function setCollapsed(group, collapsed){
    if(!group) return;
    group.classList.toggle('is-collapsed', !!collapsed);
    const title = group.querySelector('.drawerGroupTitle');
    if(title){
      title.setAttribute('aria-expanded', collapsed ? 'false' : 'true');
    }
  }

  const groups = Array.from(document.querySelectorAll('#drawer .drawerGroup'));
  groups.forEach(group => {
    const title = group.querySelector('.drawerGroupTitle');
    if(!title) return;

    const name = title.textContent.trim();
    const key = 'taxsonic_drawer_group_' + name;

    // make title behave like a button
    title.setAttribute('role','button');
    title.setAttribute('tabindex','0');

    const saved = localStorage.getItem(key);
    if(saved === '1') setCollapsed(group, true);

    const toggle = () => {
      const collapsed = group.classList.contains('is-collapsed');
      const next = !collapsed
      setCollapsed(group, next);
      localStorage.setItem(key, next ? '1' : '0');
    };

    title.addEventListener('click', toggle);
    title.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        toggle();
      }
    });
  });

  // Ensure active link's group is open
  const active = document.querySelector('#drawer .drawerNav a.active');
  if(active){
    const group = active.closest('.drawerGroup');
    if(group){
      setCollapsed(group, false);
      const title = group.querySelector('.drawerGroupTitle');
      if(title){
        const key = 'taxsonic_drawer_group_' + title.textContent.trim();
        localStorage.setItem(key, '0');
      }
    }
  }
})();
</script>
<script>
(function(){
  function isLoggedIn(){
    return (localStorage.getItem('taxsonic_is_logged_in') === '1');
  }
  function clearAuth(){
    localStorage.removeItem('taxsonic_is_logged_in');
    localStorage.removeItem('taxsonic_user_role');
    localStorage.removeItem('taxsonic_role');
    localStorage.removeItem('role');
    localStorage.removeItem('taxsonic_is_admin'); // legacy
  }

  function enhanceLoginLogoutLinks(){
    const links = Array.from(document.querySelectorAll('a[href="login.html"], a[href="./login.html"]'));
    if(!links.length) return;

    if(isLoggedIn()){
      links.forEach(a=>{
        a.setAttribute('href', '#logout');
        a.textContent = '로그아웃';
        a.classList.add('logoutLink');
      });
      document.addEventListener('click', function(e){
        const a = e.target.closest('a[href="#logout"]');
        if(!a) return;
        e.preventDefault();
        clearAuth();
        window.location.href = 'index.html';
      });
    } else {
      links.forEach(a=>{
        a.textContent = '로그인';
        // keep href as login.html
      });
    }
  }

  document.addEventListener('DOMContentLoaded', enhanceLoginLogoutLinks);
})();
</script>
</body>
</html>
